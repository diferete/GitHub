<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="https://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="https://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="https://jasperreports.sourceforge.net/jasperreports https://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="RelatorioBase" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="489d093b-2f1c-402b-919f-bff05d2474ba">
	<property name="ireport.zoom" value="1.1000000000000005"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<queryString>
		<![CDATA[SELECT tbfunhoras.funcod,funnome,funcao, funvlrhora,funsit,fundata,funint, SEC_TO_TIME(SUM(TIME_TO_SEC(funausen))) AS total_ausencia, SEC_TO_TIME(SUM(TIME_TO_SEC(TIMEDIFF(funhorafinal, funhoratarde))
+ TIME_TO_SEC(TIMEDIFF(funhoraalm, funhoraini))) - SUM(TIME_TO_SEC(funint + funausen))) AS total_horas_trabalhadas, SEC_TO_TIME(SUM(TIME_TO_SEC(TIMEDIFF(funhorafinal, funhoratarde))
+ TIME_TO_SEC(TIMEDIFF(funhoraalm, funhoraini))) - SUM(TIME_TO_SEC(funausen))) AS total_horas_DME,

(SUM(TIME_TO_SEC(TIMEDIFF(funhorafinal, funhoratarde))
+ TIME_TO_SEC(TIMEDIFF(funhoraalm, funhoraini))) - SUM(TIME_TO_SEC(funint + funausen)))/3600*(funvlrhora) AS vlr_pago_geraldo,

(SUM(TIME_TO_SEC(TIMEDIFF(funhorafinal, funhoratarde))
+ TIME_TO_SEC(TIMEDIFF(funhoraalm, funhoraini))) - SUM(TIME_TO_SEC(funausen)))/3600*(funvlrhora) AS vlr_pago_dme
FROM tbfunhoras
LEFT OUTER
JOIN tbfun ON tbfunhoras.funcod = tbfun.funcod
WHERE fundata >=01/04/2015
GROUP BY tbfunhoras.funcod,fundata
ORDER BY funnome,fundata]]>
	</queryString>
	<field name="funcod" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="funnome" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="funcao" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="funvlrhora" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="funsit" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="fundata" class="java.sql.Date">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="funint" class="java.sql.Time">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="total_ausencia" class="java.sql.Time">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="total_horas_trabalhadas" class="java.sql.Time">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="total_horas_DME" class="java.sql.Time">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="vlr_pago_geraldo" class="java.math.BigDecimal"/>
	<field name="vlr_pago_dme" class="java.math.BigDecimal"/>
	<variable name="vlr_pago_geraldo_1" class="java.math.BigDecimal" resetType="Group" resetGroup="Funcionario" calculation="Sum">
		<variableExpression><![CDATA[$F{vlr_pago_geraldo}]]></variableExpression>
	</variable>
	<variable name="total_horas_trabalhadas_1" class="java.lang.Integer" resetType="Group" resetGroup="Funcionario" calculation="Count">
		<variableExpression><![CDATA[$F{total_horas_trabalhadas}]]></variableExpression>
	</variable>
	<variable name="vlr_pago_dme_1" class="java.math.BigDecimal" resetType="Group" resetGroup="Funcionario" calculation="Sum">
		<variableExpression><![CDATA[$F{vlr_pago_dme}]]></variableExpression>
	</variable>
	<variable name="vlr_pago_geraldo_2" class="java.math.BigDecimal" resetType="Page" calculation="Sum">
		<variableExpression><![CDATA[$F{vlr_pago_geraldo}]]></variableExpression>
	</variable>
	<variable name="vlr_pago_dme_2" class="java.math.BigDecimal" resetType="Page" calculation="Sum">
		<variableExpression><![CDATA[$F{vlr_pago_dme}]]></variableExpression>
	</variable>
	<variable name="vlr_pago_geraldo_3" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{vlr_pago_geraldo}]]></variableExpression>
	</variable>
	<variable name="vlr_pago_dme_3" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{vlr_pago_dme}]]></variableExpression>
	</variable>
	<variable name="vlr_pago_geraldo_4" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{vlr_pago_geraldo}]]></variableExpression>
	</variable>
	<variable name="total_horas_DME_1" class="java.lang.Integer" calculation="Count">
		<variableExpression><![CDATA[$F{total_horas_DME}]]></variableExpression>
	</variable>
	<variable name="total_horas_trabalhadas_2" class="java.lang.Integer" calculation="Count">
		<variableExpression><![CDATA[$F{total_horas_trabalhadas}]]></variableExpression>
	</variable>
	<variable name="new Date() " class="java.lang.String"/>
	<group name="Funcionario">
		<groupExpression><![CDATA[$F{funnome}]]></groupExpression>
		<groupHeader>
			<band height="61">
				<textField>
					<reportElement x="5" y="1" width="550" height="20" uuid="344c033e-da56-4eeb-9921-4f33a0cb35b5"/>
					<textElement>
						<font size="14" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{funnome}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement x="2" y="39" width="61" height="20" uuid="02083fe1-83a5-4ea0-9101-444708165629"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="8" isBold="true"/>
					</textElement>
					<text><![CDATA[DATA]]></text>
				</staticText>
				<staticText>
					<reportElement x="257" y="40" width="111" height="20" uuid="92806d72-e809-4233-ba57-aadd5d3d6587"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="8" isBold="true"/>
					</textElement>
					<text><![CDATA[VLR. COM DESCONTO]]></text>
				</staticText>
				<staticText>
					<reportElement x="464" y="39" width="91" height="20" uuid="d85712d9-3972-4c8a-9061-2c416845357a"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="8" isBold="true"/>
					</textElement>
					<text><![CDATA[VLR. S/ DESCONTO]]></text>
				</staticText>
				<line>
					<reportElement x="0" y="40" width="555" height="1" uuid="d88865cd-0016-44a3-af1e-d01c346d2e76"/>
				</line>
				<staticText>
					<reportElement x="67" y="39" width="43" height="20" uuid="9296ecfb-7284-41c3-83aa-973a94f9da9f"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="8" isBold="true"/>
					</textElement>
					<text><![CDATA[HORAS]]></text>
				</staticText>
				<textField>
					<reportElement x="53" y="20" width="156" height="20" uuid="5cbaf2d6-6122-4049-ba97-6fa7ce3b1f0a"/>
					<textElement verticalAlignment="Middle"/>
					<textFieldExpression><![CDATA[$F{funcao}]]></textFieldExpression>
				</textField>
				<textField pattern="#,##0.00;(#,##0.00)">
					<reportElement x="250" y="20" width="100" height="20" uuid="1f9f7b0e-a861-425c-b810-3f406ca91df3"/>
					<textElement verticalAlignment="Middle"/>
					<textFieldExpression><![CDATA[$F{funvlrhora}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement x="5" y="20" width="48" height="20" uuid="edd752dd-d41f-4c2d-8a7e-4e151f5adb30"/>
					<textElement verticalAlignment="Middle">
						<font isBold="true"/>
					</textElement>
					<text><![CDATA[FUNÇÃO:]]></text>
				</staticText>
				<staticText>
					<reportElement x="178" y="20" width="72" height="20" uuid="2a1e2fff-01c7-4f7c-bdc9-4b535859324e"/>
					<textElement verticalAlignment="Middle">
						<font isBold="true"/>
					</textElement>
					<text><![CDATA[VALOR HORA:]]></text>
				</staticText>
				<line>
					<reportElement x="0" y="21" width="555" height="1" uuid="c6781ee0-57b1-4599-a45f-e12d1693e74e"/>
				</line>
				<line>
					<reportElement x="0" y="58" width="555" height="1" uuid="496aa4e9-596a-479e-ad60-49aaed8ea8d8"/>
				</line>
				<staticText>
					<reportElement x="390" y="39" width="68" height="20" uuid="2ced8d20-2f57-48a8-aa48-ae95cfabed3a"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="8" isBold="true"/>
					</textElement>
					<text><![CDATA[HORAS DME]]></text>
				</staticText>
				<staticText>
					<reportElement x="184" y="39" width="64" height="20" uuid="d960f2d8-54df-4e7a-ba25-b31b73807351"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="8" isBold="true"/>
					</textElement>
					<text><![CDATA[AUSENCIA]]></text>
				</staticText>
				<staticText>
					<reportElement x="115" y="39" width="64" height="20" uuid="29c0b4f7-b294-4446-83c9-51af2248a4d2"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="8" isBold="true"/>
					</textElement>
					<text><![CDATA[INTERVALO]]></text>
				</staticText>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="32">
				<line>
					<reportElement x="0" y="0" width="555" height="1" uuid="6b8a141d-6cea-4ed1-9288-c0292328870d"/>
				</line>
				<textField pattern="#,##0.00;(#,##0.00)">
					<reportElement x="191" y="2" width="73" height="20" uuid="f603449e-c2e8-407c-82e3-c0a3730e4b0c"/>
					<textElement verticalAlignment="Middle"/>
					<textFieldExpression><![CDATA[$V{vlr_pago_geraldo_1}]]></textFieldExpression>
				</textField>
				<textField pattern="#,##0.00;(#,##0.00)">
					<reportElement x="415" y="1" width="80" height="20" uuid="145d10c9-4fa4-4c3a-bcbc-7eefdf60ba24"/>
					<textElement verticalAlignment="Middle"/>
					<textFieldExpression><![CDATA[$V{vlr_pago_dme_1}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement x="67" y="5" width="78" height="15" uuid="8bc77141-e8d9-4124-8d62-5c136d657302"/>
					<textElement verticalAlignment="Middle">
						<font isBold="true"/>
					</textElement>
					<text><![CDATA[TOTAL MATOS]]></text>
				</staticText>
				<staticText>
					<reportElement x="342" y="4" width="66" height="15" uuid="df39260e-836d-4af0-a947-3c8828182cab"/>
					<textElement verticalAlignment="Middle">
						<font isBold="true"/>
					</textElement>
					<text><![CDATA[TOTAL  DME:]]></text>
				</staticText>
				<line>
					<reportElement x="0" y="22" width="555" height="1" uuid="534a1530-f8ac-4096-9881-a031b5a9bcf9"/>
				</line>
			</band>
		</groupFooter>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="150" splitType="Stretch">
			<rectangle>
				<reportElement x="5" y="0" width="555" height="143" uuid="4faf2d37-9a1f-4a56-8ebc-b7e7a87e5958"/>
			</rectangle>
			<staticText>
				<reportElement x="11" y="59" width="339" height="33" uuid="0cde163f-02a0-4cb8-92ef-f7edadabd614"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="20"/>
				</textElement>
				<text><![CDATA[APURAÇÃO DE HORAS DO MÊS ]]></text>
			</staticText>
		</band>
	</title>
	<pageHeader>
		<band height="13" splitType="Stretch"/>
	</pageHeader>
	<columnHeader>
		<band height="11" splitType="Stretch"/>
	</columnHeader>
	<detail>
		<band height="21" splitType="Stretch">
			<textField pattern="#,##0.00;(#,##0.00)">
				<reportElement x="464" y="1" width="91" height="20" uuid="b455c81d-6b55-42fa-ae01-d76ef52b63a8"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{vlr_pago_dme}]]></textFieldExpression>
			</textField>
			<textField pattern="HH:mm">
				<reportElement x="390" y="0" width="68" height="20" uuid="d6211b4d-115a-4402-9606-5496eecb210e"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{total_horas_DME}]]></textFieldExpression>
			</textField>
			<textField pattern="HH:mm">
				<reportElement x="115" y="-1" width="63" height="20" uuid="e951d9c4-e1db-4b80-b52a-3e353fa5634e"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{funint}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00;(#,##0.00)">
				<reportElement x="257" y="0" width="111" height="20" uuid="7da4b919-6884-4051-acb0-26f98fa46ce9"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{vlr_pago_geraldo}]]></textFieldExpression>
			</textField>
			<textField pattern="dd/MM/yyyy">
				<reportElement x="2" y="-1" width="61" height="20" uuid="85b55421-e163-49d3-948d-2207eb546f1c"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{fundata}]]></textFieldExpression>
			</textField>
			<textField pattern="HH:mm">
				<reportElement x="67" y="-1" width="43" height="20" uuid="75c6c3e1-779f-4564-8da2-79463af6aaf4"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{total_horas_trabalhadas}]]></textFieldExpression>
			</textField>
			<textField pattern="HH:mm">
				<reportElement x="184" y="0" width="64" height="20" uuid="bbd5b12b-cbfa-4ec3-b2fe-a3a810498f22"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{total_ausencia}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band height="10" splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band height="13" splitType="Stretch"/>
	</pageFooter>
	<summary>
		<band height="26" splitType="Stretch"/>
	</summary>
</jasperReport>
