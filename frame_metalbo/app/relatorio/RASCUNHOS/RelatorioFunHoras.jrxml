<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="https://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="https://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="https://jasperreports.sourceforge.net/jasperreports https://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="Horas" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="ab4edd07-aad8-44f4-bf5c-3570bbfc9c16">
	<property name="ireport.zoom" value="1.5"/>
	<property name="ireport.x" value="11"/>
	<property name="ireport.y" value="0"/>
	<parameter name="filtroSql" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[select tbfunhoras.funcod,funnome,funcao, funvlrhora,funsit,date_format(fundata, '%d/%m/%Y')
AS fundata,

SEC_TO_TIME(SUM( TIME_TO_SEC(funausen))) AS total_ausencia,

SEC_TO_TIME(SUM(TIME_TO_SEC(TIMEDIFF(funhorafinal, funhoratarde))
+ TIME_TO_SEC(TIMEDIFF(funhoraalm, funhoraini))) - SUM( TIME_TO_SEC(funint + funausen))) as total_horas_trabalhadas,

SEC_TO_TIME(SUM(TIME_TO_SEC(TIMEDIFF(funhorafinal, funhoratarde))
+ TIME_TO_SEC(TIMEDIFF(funhoraalm, funhoraini))) - SUM( TIME_TO_SEC(funausen))) as total_horas_DME,

(SUM(TIME_TO_SEC(TIMEDIFF(funhorafinal, funhoratarde))
+ TIME_TO_SEC(TIMEDIFF(funhoraalm, funhoraini))) - SUM( TIME_TO_SEC(funint + funausen)))/3600*(funvlrhora) as vlr_pago_geraldo,

(SUM(TIME_TO_SEC(TIMEDIFF(funhorafinal, funhoratarde))
+ TIME_TO_SEC(TIMEDIFF(funhoraalm, funhoraini))) - SUM( TIME_TO_SEC(funausen)))/3600*(funvlrhora) as vlr_pago_dme
from  tbfunhoras left outer join tbfun
on tbfunhoras.funcod = tbfun.funcod
$P{filtroSql}]]>
	</queryString>
	<field name="funcod" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="funnome" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="funcao" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="funvlrhora" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="funsit" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="fundata" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="total_ausencia" class="java.sql.Time">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="total_horas_trabalhadas" class="java.sql.Time">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="total_horas_DME" class="java.sql.Time">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="vlr_pago_geraldo" class="java.math.BigDecimal"/>
	<field name="vlr_pago_dme" class="java.math.BigDecimal"/>
	<variable name="vlr_pago_geraldo_1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{vlr_pago_geraldo}]]></variableExpression>
	</variable>
	<variable name="total_horas_DME_1" class="java.lang.Integer" calculation="Count">
		<variableExpression><![CDATA[$F{total_horas_DME}]]></variableExpression>
	</variable>
	<variable name="vlr_pago_dme_1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{vlr_pago_dme}]]></variableExpression>
	</variable>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="116" splitType="Stretch">
			<rectangle>
				<reportElement x="0" y="0" width="555" height="116" uuid="3c03d383-613a-488c-ad48-273d9f350d8a"/>
			</rectangle>
			<staticText>
				<reportElement x="0" y="2" width="555" height="32" uuid="914621d2-fecd-4c24-9dff-af9857584f24"/>
				<textElement>
					<font size="18" isBold="true"/>
				</textElement>
				<text><![CDATA[FICHA DE HORAS]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="47" width="73" height="20" uuid="49290609-72d2-44cc-8ca5-4b912c67d81a"/>
				<textElement>
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Funcionário:]]></text>
			</staticText>
			<textField>
				<reportElement x="74" y="47" width="248" height="20" uuid="c62347d3-bbd7-492d-9170-62faa1cd932e"/>
				<textElement>
					<font size="12"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{funnome}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="73" y="67" width="249" height="20" uuid="47d49880-3426-4237-8c1d-3c1ae982b57e"/>
				<textElement>
					<font size="12"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{funcao}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="0" y="86" width="73" height="20" uuid="588069d3-2485-4529-b8c1-f10008ecbf0a"/>
				<textElement>
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Valor/Hora:]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="67" width="73" height="20" uuid="8a42f567-c6b5-4b05-b86e-fd21b1fb3ae8"/>
				<textElement>
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Função:]]></text>
			</staticText>
			<textField pattern="###0.00">
				<reportElement x="95" y="86" width="100" height="20" uuid="240b1c80-dd99-4f10-9073-dcc9c2cdc470"/>
				<textElement>
					<font size="12"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{funvlrhora}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="72" y="86" width="23" height="20" uuid="8b6e6602-e7ee-4d9c-9ef4-df92f4552873"/>
				<textElement>
					<font size="12"/>
				</textElement>
				<text><![CDATA[R$]]></text>
			</staticText>
		</band>
	</title>
	<pageHeader>
		<band height="16" splitType="Stretch">
			<line>
				<reportElement x="0" y="15" width="555" height="1" uuid="9309ec98-772b-4c78-84dc-14bfe41357e7"/>
			</line>
		</band>
	</pageHeader>
	<columnHeader>
		<band height="25" splitType="Stretch">
			<staticText>
				<reportElement x="0" y="2" width="61" height="20" uuid="c4d49334-ce37-447d-8342-2df8b6a17716"/>
				<textElement>
					<font isBold="true" isItalic="false"/>
				</textElement>
				<text><![CDATA[Data]]></text>
			</staticText>
			<staticText>
				<reportElement x="449" y="2" width="100" height="20" uuid="db7ed0cb-8a7f-4bd3-9836-1593f36287dc"/>
				<textElement textAlignment="Center">
					<font isBold="true" isItalic="false"/>
				</textElement>
				<text><![CDATA[Total de Ausência]]></text>
			</staticText>
			<staticText>
				<reportElement x="68" y="3" width="62" height="20" uuid="4ab09c2c-5bcd-497d-8948-dbfdb7cab25f"/>
				<textElement>
					<font isBold="true" isItalic="false"/>
				</textElement>
				<text><![CDATA[Total Horas]]></text>
			</staticText>
			<staticText>
				<reportElement x="256" y="4" width="100" height="20" uuid="66f55297-146b-455e-b012-47aa69891efd"/>
				<textElement>
					<font isBold="true" isItalic="false"/>
				</textElement>
				<text><![CDATA[Total Horas DME]]></text>
			</staticText>
			<line>
				<reportElement x="0" y="22" width="555" height="1" uuid="f151cbf3-8b65-4731-b2b3-466231cfdd66"/>
			</line>
			<line>
				<reportElement x="0" y="22" width="555" height="1" uuid="f151cbf3-8b65-4731-b2b3-466231cfdd66"/>
			</line>
			<staticText>
				<reportElement x="136" y="3" width="77" height="19" uuid="893da6ee-e763-46cb-9437-fbe0f7a9f425"/>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Total a Pagar]]></text>
			</staticText>
			<staticText>
				<reportElement x="356" y="4" width="100" height="20" uuid="e8d98cd6-9c4e-44e6-a6c9-51e760abfd69"/>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Total a Pagar DME]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="21" splitType="Stretch">
			<textField>
				<reportElement x="0" y="0" width="61" height="20" uuid="6d0984e3-cf85-4b1d-8827-64e5b5654bf9"/>
				<textFieldExpression><![CDATA[$F{fundata}]]></textFieldExpression>
			</textField>
			<textField pattern="HH:mm">
				<reportElement x="449" y="0" width="100" height="20" uuid="8e759c28-2977-473d-9f75-f82dfd82276f"/>
				<textElement textAlignment="Center"/>
				<textFieldExpression><![CDATA[$F{total_ausencia}]]></textFieldExpression>
			</textField>
			<textField pattern="HH:mm">
				<reportElement x="68" y="0" width="62" height="20" uuid="469fc1f2-9746-4619-b5af-5ffa7e4afe0c"/>
				<textFieldExpression><![CDATA[$F{total_horas_trabalhadas}]]></textFieldExpression>
			</textField>
			<textField pattern="HH:mm">
				<reportElement x="256" y="1" width="100" height="20" uuid="6fc74eb0-70c8-45cd-b682-a9057a78e672"/>
				<textFieldExpression><![CDATA[$F{total_horas_DME}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00;(#,##0.00)">
				<reportElement x="136" y="1" width="77" height="20" uuid="b5545170-1386-4603-bfe9-69b6139461a8"/>
				<textFieldExpression><![CDATA[$F{vlr_pago_geraldo}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00;(#,##0.00)">
				<reportElement x="356" y="1" width="100" height="20" uuid="51e92018-feda-47c0-9f6b-ecb6b05db3c9"/>
				<textFieldExpression><![CDATA[$F{vlr_pago_dme}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band height="45" splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band height="54" splitType="Stretch"/>
	</pageFooter>
	<summary>
		<band height="72" splitType="Stretch">
			<textField pattern="#,##0.00;(#,##0.00)">
				<reportElement x="201" y="12" width="100" height="20" uuid="080fbfee-498c-4ae7-b4b0-8b50f8b1bf17"/>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{vlr_pago_geraldo_1}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="13" y="12" width="182" height="20" uuid="cec6dad2-39d7-49ff-b14c-46914afcf9a6"/>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[TOTAL DESCONTADO INTERVALO]]></text>
			</staticText>
			<staticText>
				<reportElement x="13" y="42" width="182" height="20" uuid="48fa717a-f202-4453-936c-5e4e41b9efca"/>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[TOTAL SEM DESCONTO INTERVALO]]></text>
			</staticText>
			<textField pattern="#,##0.00;(#,##0.00)">
				<reportElement x="202" y="42" width="100" height="20" uuid="9b6431d2-0d38-4bc9-914b-5705f5a545c5"/>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{vlr_pago_dme_1}]]></textFieldExpression>
			</textField>
		</band>
	</summary>
</jasperReport>
